(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{124:function(t,n,e){"use strict";var r=e(57);e.n(r).a},125:function(t,n,e){(t.exports=e(51)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* .comment-list {\n  background: #ffffff;\n  line-height: 20px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n}\n\n.add-comment {\n  margin: auto;\n  width: 400px;\n} */\n",""])},126:function(t,n,e){"use strict";var r=e(58);e.n(r).a},127:function(t,n,e){(t.exports=e(51)(!1)).push([t.i,"\n.content {\n  padding: 20px;\n  text-align: left;\n}\n.el-image__inner {\n  width: auto;\n}\n.new_chapters {\n  margin-bottom: 10px;\n  margin-top: 10px;\n}\n.block {\n  padding: 10px 0;\n  display: flex;\n  margin: inherit;\n  box-sizing: border-box;\n  vertical-align: top;\n}\n.image-slot {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 500px;\n  height: 500px;\n  background: #f5f7fa;\n  color: #909399;\n  font-size: 14px;\n}\n.el-image {\n  width: 500px;\n  height: 500px;\n}\n",""])},160:function(t,n,e){"use strict";e.r(n);var r=e(5),o=e.n(r),i=e(13),s=e.n(i),a=e(8);function c(t,n,e,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,o)}function u(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function s(t){c(i,r,o,s,a,"next",t)}function a(t){c(i,r,o,s,a,"throw",t)}s(void 0)}))}}var l,p,d={data:function(){return{errors:{author:""},isShowForm:!1,isLoading:!0,form:{content:"",post_id:""}}},props:{comments:{}},watch:{form:{handler:function(){this.errors.author=""},deep:!0}},created:(p=u(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.form.post_id=this.$route.params.id;case 1:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)}),methods:{onAddComment:function(){this.$store.getters.getAuth()||(this.$store.commit("user/error","Спочатку авторизуйтеся"),this.$router.push("/sign-in")),this.form.author="",this.form.content="",this.isShowForm=!0},onSubmit:function(){this.createComment()},createComment:(l=u(o.a.mark((function t(){var n=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.$store.state.axiosAuth.post(a.a+"/v1/comment",this.form).then((function(t){n.author="",n.isLoading=!1,n.isShowForm=!1,n.$emit("completed",t.data),n.comments.push(t.data.data),n.$router.push({path:"/post/"+n.$router.param.id})})).catch((function(t){t.response.data.errors.author&&(n.errors.author=t.response.data.errors.author[0]),n.isLoading=!1}));case 1:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})}},h=(e(124),e(11)),m=Object(h.a)(d,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",[e("h3",[t._v("Відгуки:")]),t._v(" "),t._l(t.comments,(function(n){return[e("div",{key:n.id},[e("label",[t._v("Автор:")]),t._v(" "),e("span",[t._v(t._s(n.user_name))]),t._v(" "),e("p",[t._v(t._s(n.content))]),t._v(" "),e("div",{staticClass:"border-dotted"})])]}))],2),t._v(" "),t.isShowForm?e("div",[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px","label-position":"top"}},[e("el-form-item",{attrs:{label:"Відгук"}},[e("el-input",{attrs:{type:"textarea",rows:2,placeholder:"заповніть вміст Відгука"},model:{value:t.form.content,callback:function(n){t.$set(t.form,"content",n)},expression:"form.content"}})],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Написати відгук")])],1)],1)],1):e("el-button",{on:{click:t.onAddComment}},[t._v("Додати відгук")])],1)}),[],!1,null,"08e1d2df",null).exports,f=e(29);function v(t,n,e,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,o)}function _(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function b(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var g={components:{comment:m},computed:function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?_(e,!0).forEach((function(n){b(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}({},Object(f.mapGetters)(["hasEdit"])),data:function(){return{imgUrl:"",isLoading:!0,post:{},comments:{}}},created:function(){var t,n=(t=o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.a.get(a.a+"/v1/post/"+this.$route.params.id);case 3:n=t.sent,this.post=n.data.data,this.comments=n.data.data.comments,this.isLoading=!1,n.data.data.file&&(this.imgUrl=a.b+n.data.data.file.url),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,this,[[0,10]])})),function(){var n=this,e=arguments;return new Promise((function(r,o){var i=t.apply(n,e);function s(t){v(i,r,o,s,a,"next",t)}function a(t){v(i,r,o,s,a,"throw",t)}s(void 0)}))});return function(){return n.apply(this,arguments)}}(),methods:{handleEditPost:function(t){this.$router.push({path:"/post-update/"+t})},handleDeletePost:function(t){this.$store.dispatch("post/delete",t)},handleEditChapter:function(t,n){this.$router.push({path:"/novel/"+t+"/chapter-update/"+n})},onRead:function(t){console.log(t),this.$router.push({path:"/post/"+this.post.id+"/chapter/"+t.id})},toNewChapter:function(){this.$router.push({path:"/chapter-form/"+this.post.id})}}},w=(e(126),Object(h.a)(g,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("el-main",[e("div",{staticClass:"post content-block"},[e("div",{staticClass:"content"},[t.isLoading?e("div",[t._v("Завантаження новели...")]):e("div",[t.imgUrl?e("div",{staticClass:"block"},[e("el-image",{attrs:{src:t.imgUrl}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])])],1):t._e(),t._v(" "),e("el-link",{staticClass:"post_title"},[t._v(t._s(t.post.name))]),t._v(" "),e("p",{staticClass:"content-post",domProps:{innerHTML:t._s(t.post.description)}}),t._v(" "),t.hasEdit(t.post.user_id)?e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.handleDeletePost(t.post.id)}}},[t._v("Видалити")]):t._e(),t._v(" "),t.hasEdit(t.post.user_id)?e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.handleEditPost(t.post.id)}}},[t._v("Редагувати")]):t._e(),t._v(" "),e("el-divider",[t._v("Остані релізи")]),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.post.chapters}},[e("el-table-column",{attrs:{prop:"created_at",label:"Дата","min-width":"85px",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("i",{staticClass:"el-icon-time"}),t._v(" "),e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(n.row.created_at))])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"Назва глави","min-width":"90px"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.onRead(n.row)}}},[t._v(t._s(n.row.name))])]}}])}),t._v(" "),t.hasEdit(t.post.user_id)?e("el-table-column",{attrs:{align:"right","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleEditChapter(t.post.id,n.row.id)}}},[e("i",{staticClass:"el-icon-edit"})])]}}],null,!1,511764622)}):t._e()],1),t._v(" "),t.hasEdit(t.post.user_id)?e("el-button",{staticClass:"new_chapters",attrs:{size:"mini",type:"primary"},on:{click:t.toNewChapter}},[t._v("Додати нову главу")]):t._e(),t._v(" "),e("div",{staticClass:"border"}),t._v(" "),e("comment",{attrs:{comments:t.comments}})],1)])])])}),[],!1,null,null,null));n.default=w.exports},57:function(t,n,e){var r=e(125);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(52)(r,o);r.locals&&(t.exports=r.locals)},58:function(t,n,e){var r=e(127);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(52)(r,o);r.locals&&(t.exports=r.locals)}}]);